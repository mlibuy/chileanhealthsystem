<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Urgent Clinics impact in healthcare networks – matiaslibuy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a14e3238c51140e99ccc48519b6ed9ce.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">matiaslibuy</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./urgent-clinics.html" aria-current="page"> 
<span class="menu-text">Urgent Clinics impact in healthcare networks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./physician-impact.html"> 
<span class="menu-text">Emergency medicine physician impact in emergency department timeframes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./bed-estimation.html"> 
<span class="menu-text">Bed estimation</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Urgent Clinics impact in healthcare networks</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<script>
  const password = prompt("Por favor, introduce la contraseña para acceder:");
  const correct = "saraccess2024"; // Puedes cambiar esta clave a la que tú quieras

  if (password !== correct) {
    document.body.innerHTML = `
      <h1>Acceso denegado</h1>
      <p>No tienes permiso para ver este contenido.</p>
    `;
  }
</script>
<script>
  const password = prompt("Por favor, introduce la contraseña para acceder:");
  const correct = "saraccess2024";  // Cambia esta clave a la que tú quieras

  if (password !== correct) {
    document.body.innerHTML = `
      <h1>Acceso denegado</h1>
      <p>No tienes permiso para ver este contenido.</p>
    `;
  }
</script>
<section id="the-impact-of-urgent-care-centres-sar-on-ed-use-rates-in-chile" class="level2">
<h2 class="anchored" data-anchor-id="the-impact-of-urgent-care-centres-sar-on-ed-use-rates-in-chile">The impact of urgent care centres (SAR) on ED use rates in Chile</h2>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>Emergency Department (ED) crowding is a growing concern in healthcare systems worldwide, including Chile, where public health services serve over 80% of the population. In response to rising demand and to reduce unnecessary emergency department (ED) visits, the Chilean Ministry of Health has implemented Urgent Primary Care Centres (SAPUs) and, more recently, High-Resolution Urgent Care Centres (SARs), which operate extended hours and provide enhanced diagnostic and therapeutic capabilities. Since their inception, more than 100 SARs have been established across the country over the past two decades.</p>
<p>Chile’s public health system (80% of population) is organized into 29 regional Health Services (Servicios de Salud), each responsible for coordinating care delivery within its territory. This example study focuses on the Servicio de Salud Metropolitano Central (SSMC), one of the largest and most urbanized networks, located in Santiago. Specifically, it evaluates the effect of implementing two SARs—SAR Enfermera Sofía Pincheira (opened on September 15, 2016) and SAR Michelle Bachelet (opened on August 13, 2024)—on daily emergency care utilization rates per 1,000 inhabitants. The analysis uses neighboring health services as counterfactuals to estimate the impact of these interventions within the SSMC.</p>
</section>
<section id="methods" class="level3">
<h3 class="anchored" data-anchor-id="methods">Methods</h3>
<p>Data are derived from administrative records of the REM 08 - Urgent Care Records, reported by the Department of Health Statistics and Information (DEIS), which cover all urgent care visits across public facilities in Chile. The study population includes all adult urgent care visits in the SSMC network and selected comparison networks.</p>
<p>A difference-in-differences (DiD) design was employed to estimate the causal effect of SAR implementation on the daily emergency department (ED) utilization rate per 1,000 inhabitants. This crude model included indicators for the treated area (treated), the post-intervention period (periododespues), and their interaction (treated:periododespues), which captures the DiD estimate.</p>
<p>The outcomes were modeled using ordinary least squares (OLS), assuming independent and identically distributed (IID) errors.</p>
</section>
<section id="difference-in-differences-model" class="level3">
<h3 class="anchored" data-anchor-id="difference-in-differences-model">Difference-in-Differences Model</h3>
<p>Let \( Y_{it} \) denote the outcome variable—the daily emergency department (ED) visit rate per 1,000 inhabitants—for health service <em>i</em> on day <em>t</em>.</p>
<p>The DiD regression crude model is specified as:</p>
<p>[ Y_{it} = _0 + _1 _i + _2 _t + _3 (_i <em>t) +</em> ]</p>
<p>Where:</p>
<ul>
<li><strong>Treated</strong><sub>i</sub> is a binary indicator equal to 1 if the observation belongs to the treated health service (SSMC), and 0 otherwise.</li>
<li><strong>Post</strong><sub>t</sub> is a binary indicator equal to 1 for observations after the SAR implementation date, and 0 otherwise.</li>
<li><strong>Treated</strong><sub>i</sub> × Post<sub>t</sub> is the interaction term that captures the difference-in-differences estimator.</li>
<li><strong>β₃</strong> is the DiD estimate of the causal effect of the SAR implementation.</li>
<li><strong>ε</strong><sub>it</sub> is the error term, assumed to be IID.</li>
</ul>
<p>To support this assumption, we selected comparison health services using the MAD in daily rates prior to intervention. The unit of analysis was the daily ED rate per 1,000 inhabitants, aggregated by health service.</p>
<p>We used symmetric 360-day windows before and after the intervention. No other major policy disruptions or new urgent care centres were introduced during the study periods, minimizing the risk of confounding shocks. By incorporating a contemporaneous control group, the DiD model adjusts for time-varying factors such as seasonality, public health campaigns, or social unrest. The large sample size (N &gt; 21,000) and the use of national standardized data (REM A-08) enhance the robustness and generalizability of the results.</p>
</section>
<section id="selection-of-comparison-groups" class="level3">
<h3 class="anchored" data-anchor-id="selection-of-comparison-groups">Selection of Comparison Groups</h3>
<p>To identify the most appropriate control services, I calculated the Mean Absolute Difference (MAD) in daily ED rates between SSMC and all other services over the 360 days preceding the intervention.</p>
<ul>
<li>For SAR Sofía Pincheira, the Servicio de Salud Metropolitano Sur Oriente (SSMSO) presented the lowest MAD (0.243) and was selected as the control.</li>
<li>For SAR Michelle Bachelet, the same control (SSMSO, MAD = 0.251) was used, given its comparability and proximity.</li>
</ul>
</section>
<section id="results" class="level3">
<h3 class="anchored" data-anchor-id="results">Results</h3>
<section id="sar-sofía-pincheira-2016-intervention" class="level4">
<h4 class="anchored" data-anchor-id="sar-sofía-pincheira-2016-intervention">SAR Sofía Pincheira (2016 Intervention)</h4>
<p>DiD estimates from the ±360-day window:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Variable</th>
<th>Estimate</th>
<th>Std. Error</th>
<th>t value</th>
<th>p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Intercept</td>
<td>0.839</td>
<td>0.0084</td>
<td>99.79</td>
<td>&lt; 0.001</td>
</tr>
<tr class="even">
<td>Treated (SSMC)</td>
<td>-0.217</td>
<td>0.0171</td>
<td>-12.75</td>
<td>&lt; 0.001</td>
</tr>
<tr class="odd">
<td>Post-period</td>
<td>-0.023</td>
<td>0.0119</td>
<td>-1.90</td>
<td>0.058</td>
</tr>
<tr class="even">
<td>DiD Estimate</td>
<td>-0.086</td>
<td>0.0241</td>
<td>-3.57</td>
<td>0.0004</td>
</tr>
</tbody>
</table>
<p><strong>Interpretation</strong>: A statistically significant reduction of 0.086 daily visits per 1,000 inhabitants in SSMC relative to control post-intervention.</p>
</section>
<section id="sar-michelle-bachelet-2024-intervention" class="level4">
<h4 class="anchored" data-anchor-id="sar-michelle-bachelet-2024-intervention">SAR Michelle Bachelet (2024 Intervention)</h4>
<p>Estimates using the same ±360-day window:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Variable</th>
<th>Estimate</th>
<th>Std. Error</th>
<th>t value</th>
<th>p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Intercept</td>
<td>0.808</td>
<td>0.0092</td>
<td>88.03</td>
<td>&lt; 0.001</td>
</tr>
<tr class="even">
<td>Treated (SSMC)</td>
<td>-0.451</td>
<td>0.0172</td>
<td>-26.18</td>
<td>&lt; 0.001</td>
</tr>
<tr class="odd">
<td>Post-period</td>
<td>0.016</td>
<td>0.0139</td>
<td>1.14</td>
<td>0.255</td>
</tr>
<tr class="even">
<td>DiD Estimate</td>
<td>-0.032</td>
<td>0.0257</td>
<td>-1.23</td>
<td>0.217</td>
</tr>
</tbody>
</table>
<p><strong>Interpretation</strong>: No statistically significant change in daily ED rates after SAR Michelle Bachelet’s implementation.</p>
</section>
</section>
<section id="discussion" class="level3">
<h3 class="anchored" data-anchor-id="discussion">Discussion</h3>
<ul>
<li>The SAR Sofía Pincheira showed a modest but statistically significant reduction in ED visits, suggesting effectiveness in mitigating ED crowding.</li>
<li>The SAR Michelle Bachelet did not yield a significant effect. This could be due to factors such as location, overlapping catchment areas, baseline saturation, or post-pandemic dynamics.</li>
<li>The study contributes to evidence-based evaluations of system-level interventions for managing demand for ED services.</li>
</ul>
</section>
<section id="future-research-directions" class="level3">
<h3 class="anchored" data-anchor-id="future-research-directions">Future Research Directions</h3>
<ul>
<li>Expand the analysis to all SARs implemented nationwide in the past decade.</li>
<li>Apply synthetic control or matching methods for enhanced causal inference.</li>
<li>Incorporate geospatial data, triage categories, arrival times, and hospital congestion metrics.</li>
<li>Control for seasonality, epidemics, and sociopolitical disruptions.</li>
<li>Assess referral hospital-level effects, especially for Hospital El Carmen in Maipú, which both SARs serve.</li>
<li>Build a centralized national dataset for comprehensive system-wide evaluations of urgent care reforms.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2025 Matías Libuy Ríos</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:matiaslibuy@uchile.cl">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>